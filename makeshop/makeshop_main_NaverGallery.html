/*===============================================================================
- shopType:makeshop
- 메인 상품 네이버 갤러리
- 적용방법
  1. [data-category="025"],[data-type="025],[tab_cate_no="025"] 에 카테고리 코드 동일하게 적용
=================================================================================*/


<div id="naverStyleList" >
	<div id="naverStyleTab" class="nav_tab">
		<ul id="naverStyleMain_tap" class="main_tap">
			<li class="naverTap_over" data-category="025" onclick="naverStyleMainPrdMove(1)"><span>OUTER</span></li>      
			<li data-category="026" onclick="naverStyleMainPrdMove(2)"><span>TOP</span></li> 
			<li data-category="027" onclick="naverStyleMainPrdMove(3)"><span>PANTS</span></li>	
			
		</ul> 
	</div>
	<div id="naverStyleMainPrd" class="m-carousel m-fluid m-carousel-photos">
		<div id="naverStyle-MainPrd-inner" class="m-carousel-inner" style="-webkit-transform: translate3d(0px, 0, 0);">
			<div class="xans-element-xans-product xans-product-listnormal mPrdList" data-type="025">
			<!--/loop_category_product_025/-->
				<ul class="grid" onclick="document.location='<!--/category_product_025@link/-->'">
					<li class="img"><img src="" data-src="<!--/category_product_025@image_s/-->" /></li>
					<li class="pname"><!--/notag/category_product_025@name/--></li>
					<li class="price">
						<!--/if_category_product_025@price_replace/-->
							<!--/category_product_025@price_replace/-->
                        <!--/else/-->
							<!--/if_category_product_025@price_discount/-->
                                <p class="price-strike"><!--/number/category_product_025@price_sell/-->원</p>
								<!--/number/category_product_025@price_discount/-->원
                            <!--/else/-->
								<!--/if_category_product_025@price_consumer(+1)/-->
									<p class="price-strike"><!--/number/category_product_025@price_consumer/-->원</p>
								<!--/end_if/-->
								<!--/number/category_product_025@price_sell/-->원
                            <!--/end_if/-->
                        <!--/end_if/-->
					</li>
				</ul>
			<!--/end_loop/-->
			</div> 
			<div class="xans-element-xans-product xans-product-listnormal mPrdList" data-type="026">
			<!--/loop_category_product_026/-->
				<ul class="grid" onclick="document.location='<!--/category_product_026@link/-->'">
					<li class="img"><img src="" data-src="<!--/category_product_026@image_s/-->" /></li>
					<li class="pname"><!--/notag/category_product_026@name/--></li>
					<li class="price">
						<!--/if_category_product_026@price_replace/-->
							<!--/category_product_026@price_replace/-->
                        <!--/else/-->
							<!--/if_category_product_026@price_discount/-->
                                <p class="price-strike"><!--/number/category_product_026@price_sell/-->원</p>
								<!--/number/category_product_026@price_discount/-->원
                            <!--/else/-->
								<!--/if_category_product_026@price_consumer(+1)/-->
									<p class="price-strike"><!--/number/category_product_026@price_consumer/-->원</p>
								<!--/end_if/-->
								<!--/number/category_product_026@price_sell/-->원
                            <!--/end_if/-->
                        <!--/end_if/-->
					</li>
				</ul>
			<!--/end_loop/-->
			</div>	
			<div class="xans-element-xans-product xans-product-listnormal mPrdList" data-type="027">
			<!--/loop_category_product_027/-->
				<ul class="grid" onclick="document.location='<!--/category_product_027@link/-->'">
					<li class="img"><img src="" data-src="<!--/category_product_027@image_s/-->" /></li>
					<li class="pname"><!--/notag/category_product_027@name/--></li>
					<li class="price">
						<!--/if_category_product_027@price_replace/-->
							<!--/category_product_027@price_replace/-->
                        <!--/else/-->
							<!--/if_category_product_027@price_discount/-->
                                <p class="price-strike"><!--/number/category_product_027@price_sell/-->원</p>
								<!--/number/category_product_027@price_discount/-->원
                            <!--/else/-->
								<!--/if_category_product_027@price_consumer(+1)/-->
									<p class="price-strike"><!--/number/category_product_027@price_consumer/-->원</p>
								<!--/end_if/-->
								<!--/number/category_product_027@price_sell/-->원
                            <!--/end_if/-->
                        <!--/end_if/-->
					</li>
				</ul>
			<!--/end_loop/-->
			</div>
			
		</div>
		<div id="naverStyleMainPrd-btn" class="m-carousel-controls m-carousel-bulleted">
			<a href="#" tab_cate_no="025" data-slide="1" class="m-active">1</a>
			<a href="#" tab_cate_no="026" data-slide="2">2</a>
			<a href="#" tab_cate_no="027" data-slide="3">3</a>
		
		</div>
	</div>	
</div>





/*=====================================================================================================
- CSS
=====================================================================================================*/

/*메인 상품 네이버 갤러리 css 시작
============================================*/

#naverStyleList {
display:none;
padding-top:20px;
}

.nav_tab {
padding:0 0 0 0px; 
border-top: 1px solid #dedede;
border-bottom: 1px solid #dedede;
overflow:hidden;
background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAALElEQVQIW2NcvHixJAMU/Pv3z5gRJgDiMDExnQULwDgghYwLFy70AcnAtAEAA8sUOovPgKcAAAAASUVORK5CYII=');
font-size:12px;
text-align:center;
white-space:nowrap;
}

#naverStyleMain_tap {
display:inline-table;
width:100%;
}

#naverStyleMain_tap li {
display:inline-block;
width:50%;
height:30px;
line-height:30px;
}

.naverTap_over {
border-left:1px solid #dedede;
border-right:1px solid #dedede;
font-weight:bold;
background:#fff;
}

#naverStyleMainPrd {
padding:15px 0 0;
}

#naverStyleMainPrd .mPrdList {
display:inline-table;
padding:0 5px;
}

#naverStyleMainPrd .grid {
width:33.33%;
display:inline-block;
font-size:12px;
vertical-align:top;
padding:0 3px;
}

#naverStyleMainPrd .grid img {
width:100%;
} 

#naverStyleMainPrd .grid .price-strike{
margin:0px;
text-decoration: line-through;
line-height:10px;
}

#naverStyleMainPrd .m-carousel-controls {
position:static;
margin:15px 0 0;
}

/*메인 상품 네이버 갤러리 css 끝
============================================*/



/*=====================================================================================================
- 자바스크립트 
- 더보기 기능 유무 여부 확인
=====================================================================================================*/

/*메인 상품 네이버 갤러리 기본 javascript 시작 
==============================================================*/

$(document).ready(function(){
	if($("#naverStyleList").length){
		$('#naverStyleMainPrd').carousel();
		var len=$("#naverStyleMain_tap li").length;
		var naver_width=Math.round((100/len)*100)/100+"%";
		$("#naverStyleMain_tap li").css("width",naver_width);
		
		//메인 네이버스타일 상품 6개까지만 노출
		$("#naverStyle-MainPrd-inner").find("div").each(function(){
			$(this).find("ul").each(function(index){
				if(index>3)
					$(this).remove();
			});
		});
		
		setTimeout(function(){
			$("#naverStyleList #naverStyle-MainPrd-inner .mPrdList").find(".grid").each(function(){
				var src=$(this).find(".MS_prod_img_s").attr("data-src");
				if(src){
					$(this).find(".MS_prod_img_s").attr("src",src);
					$(this).find(".MS_prod_img_s").attr("data-src","");
				}
			});
			$("#naverStyleList").show();
		},1000);
	}
});
function naverStyleMainPrdMove(index){
Mobify.$('#naverStyleMainPrd').carousel("move",index);
}


/*메인 상품 네이버 갤러리 기본 javascript 끝 
==============================================================*/


/*메인 상품 네이버 갤러리&더보기 기능 javascript 시작 
==============================================================*/
$(document).ready(function(){
	if($("#naverStyleList_more").length){
		
		smartskinNaverMainDisplayLazyLoading_more();
		
			$(".smartSkinmainDisplayMorebtn").on("click",function(){
				var total=$(this).parent().find("#smartSkinmainDisplayMorePrd").length;
				
				if(total){
					$(this).parent().find("#smartSkinmainDisplayMorePrd").eq(0).find(".MS_prod_img_s").each(function(){
						var data_src=$(this).attr("data-src");
						$(this).attr("data-src","");
						if(data_src)
							$(this).attr("src",data_src);
					});
					$(this).parent().find("#smartSkinmainDisplayMorePrd").eq(0).show();
					$(this).parent().find("#smartSkinmainDisplayMorePrd").eq(0).attr("id","morePrd");
					
				}
				
				if(total==1)
					$(this).hide();
			});
		
	}
});

function smartskinNaverMainDisplayLazyLoading_more(){
	var mainDiv=$("#naverStyleList_more #naverStyle-MainPrd-inner");
	if(mainDiv){
		var html='';
		
		$(mainDiv).find(".mPrdList").each(function(){
			var type=$(this).attr("data-type");
			var total=$(this).find("ul").length;
			var more_index=1;
			var limit=6;
			var currentLimit=limit;
			$(this).find("ul").each(function(key){
				var ul=$(this).html();
				var onclick=$(this).attr("onclick");
				if(!key){
					html+='<div class="xans-element-xans-product xans-product-listnormal mPrdList" data-type='+type+'>';
					html+='<div class="prdList">';
				}
				
				if(key==currentLimit-1){
					html+='<ul class="grid" onclick="'+onclick+'">'+ul+"</ul>";
					html+="</div>";
					
					if(key<total-1){
						html+='<div id="smartSkinmainDisplayMorePrd" style="display:none">';
					}
					
					more_index++;
					currentLimit=limit*more_index;
				}else if(key<currentLimit){
					html+='<ul class="grid" onclick="'+onclick+'">'+ul+"</ul>";
					if(key==total-1){
						html+="</div>";
					}
				}
			});
			html+='<div class="smartSkinmainDisplayMorebtn"><span>더보기</span></div>';
			html+="</div>";
		});
		

		$("#naverStyle-MainPrd-inner").html(html);
		$("#naverStyle-MainPrd-inner").find(".mPrdList").each(function(){
			$(this).find(".MS_prod_img_s").each(function(i){
				if(i<6){
					var data_src=$(this).attr("data-src");
					$(this).attr("data-src","");
					$(this).attr("src",data_src);
				}
			});
		});
		
		$("#naverStyle-MainPrd-inner").show();
		$('#naverStyleMainPrd').carousel();
		var len=$("#naverStyleMain_tap li").length;
		var naver_width=Math.round((100/len)*100)/100+"%";
		$("#naverStyleMain_tap li").css("width",naver_width);
		
	}
}

function naverStyleMainPrdMove(index){
Mobify.$('#naverStyleMainPrd').carousel("move",index);
}

/*메인 상품 네이버 갤러리&더보기 기능 javascript 끝 
==============================================================*/

      
	  
/*============================================================
- 상품 갤러리 이동시 펼쳐진 더보기 초기화 스크립트 
- carousel 스크립트에 적용
==============================================================*/
		var cate_no='';
		$element.parent().find("#naverStyleMainPrd-btn").each(function(){
			cate_no=$(this).find(".m-active").attr('tab_cate_no');
		});

		if(cate_no){
			var mainTab=document.getElementById('naverStyleMain_tap');
			var len=mainTab.children.length;
			
			for(var i=0; i<len; i++){
				mainTab.children[i].className="";
				if(mainTab.children[i].getAttribute('data-category')==cate_no){
					mainTab.children[i].className="naverTap_over";
				}
			}
			
			//더보기 접기
			$element.find(".mPrdList").each(function(){
				$(this).find("#morePrd").each(function(){
					$(this).attr("id","smartSkinmainDisplayMorePrd");
					$(this).hide();
				});
				
				$(this).find(".smartSkinmainDisplayMorebtn").show();
			});
		}